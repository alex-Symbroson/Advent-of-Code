const s = `
############# A 
#...........# B 
###B#B#D#A### C
  #D#C#B#A#   D
  #D#B#A#C#
  #C#A#D#C#
  #########

############# A 9 9
#AA.......CC# B 
###B#B#D#.### C    5 5
  #D#C#B#.#   D
  #D#B#A#.#
  #C#A#D#.#
  #########

############# A   4
#AA.B.A...CC# B  5
###B#B#.#.### C 
  #D#C#.#.#   D 7
  #D#B#.#.#
  #C#A#D#D#   
  #########

############# A
#AA.B.A.....# B
###B#B#.#.### C  7 7
  #D#C#.#.#   D 9
  #D#B#C#D#
  #C#A#C#D#   
  #########

############# A 5
#AA.B.....BA# B  6
###B#.#.#.### C   6
  #D#.#C#.#   D
  #D#B#C#D#
  #C#A#C#D#   
  #########

############# A  5
#AA.B.A.B.BA# B 6
###B#.#.#.### C
  #D#.#C#.#   D
  #D#.#C#D#
  #C#.#C#D#   
  #########

############# A    2
#AA.A...B.BA# B 5 6
###.#.#.#.### C 
  #D#.#C#.#   D 
  #D#B#C#D#
  #C#B#C#D#   
  #########

############# A    6
#AA.......AA# B 5 6
###.#B#.#.### C 
  #D#B#C#.#   D     
  #D#B#C#D#
  #C#B#C#D#   
  #########

############# A 
#AA.......AA# B 
###.#B#C#D### C      9
  #.#B#C#D#   D 10 10
  #.#B#C#D#
  #.#B#C#D#   
  #########

############# A 5 5 9 9
#...........# B 
###A#B#C#D### C
  #A#B#C#D#   D 
  #A#B#C#D#
  #A#B#C#D#   
  #########
`

const l = (o,m) => (console.log(m,o), o)
o={A:0,B:0,C:0,D:0}
s.replace(/([ABCD])(( +\d+)+)/g, (m,c,ds) => 
    o[c] += l(ds.split(/ +/).map(Number), c)
        .reduce((a,b)=>a+b))

console.log(o,o.A+o.B*10+o.C*100+o.D*1000)